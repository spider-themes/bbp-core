!function(s,t,e){t.wp=t.wp||{},t.wp.gdbbx=t.wp.gdbbx||{},t.wp.gdbbx.toolbar={init:function(){s(".gdbbx-editor-bbcodes").each(function(){wp.gdbbx.toolbar.run(s(this),s(this))}),s(".gdbbx-newpost-bbcodes").each(function(){wp.gdbbx.toolbar.run(s(this),s(".bbp-the-content-wrapper"))}),s(".gdbbx-signature.gdbbx-limiter-enabled").each(function(){wp.gdbbx.toolbar.limit(s(this))})},run:function(t,e){s(".gdbbx-buttonbar-button button",t).keypress(function(t){32!==t.keyCode&&13!==t.keyCode||(t.preventDefault(),wp.gdbbx.toolbar.click(this,e))}),s(".gdbbx-buttonbar-button button",t).click(function(t){t.preventDefault(),wp.gdbbx.toolbar.click(this,e)})},click:function(t,e){var n=s(t).data("bbcode"),i=-1<(n=n.replace(/\(/g,"[").replace(/\)/g,"]").replace(/\'/g,'"')).indexOf("{content}"),o=-1<n.indexOf("{id}"),r=-1<n.indexOf("{url}"),a=-1<n.indexOf("{email}"),t=s("textarea",e),e=t.textrange();0<e.length&&(i?n=n.replace("{content}",e.text):o?n=n.replace("{id}",e.text):r?n=n.replace("{url}",e.text):a&&(n=n.replace("{email}",e.text))),t.textrange("replace",n)},limit:function(t){var e={maxChars:s(t).data("chars"),maxCharsWarning:s(t).data("warning"),msgFontSize:"inherit",msgFontFamily:"inherit",msgFontColor:"inherit"};s(t).jqEasyCounter(e)}},s(e).ready(function(){wp.gdbbx.toolbar.init()})}(jQuery,window,document),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(i){var r,o={get:function(t){return a[r].get.apply(this,[t])},set:function(t,e){var n,i=parseInt(t),o=parseInt(e);return void 0===t?i=0:t<0&&(i=this[0].value.length+i),void 0!==e&&(n=0<=e?i+o:this[0].value.length+o),a[r].set.apply(this,[i,n]),this},setcursor:function(t){return this.textrange("set",t,0)},replace:function(t){return a[r].replace.apply(this,[String(t)]),this},insert:function(t){return this.textrange("replace",t)}},a={xul:{get:function(t){var e={position:this[0].selectionStart,start:this[0].selectionStart,end:this[0].selectionEnd,length:this[0].selectionEnd-this[0].selectionStart,text:this.val().substring(this[0].selectionStart,this[0].selectionEnd)};return void 0===t?e:e[t]},set:function(t,e){void 0===e&&(e=this[0].value.length),this[0].selectionStart=t,this[0].selectionEnd=e},replace:function(t){var e=this[0].selectionStart,n=this[0].selectionEnd,i=this.val();this.val(i.substring(0,e)+t+i.substring(n,i.length)),this[0].selectionStart=e,this[0].selectionEnd=e+t.length}},msie:{get:function(t){var e,n=document.selection.createRange();if(void 0===n)return e={position:0,start:0,end:this.val().length,length:this.val().length,text:this.val()},void 0===t?e:e[t];var i=0,o=0,r=this[0].value.length,a=this[0].value.replace(/\r\n/g,"\n"),s=this[0].createTextRange(),l=this[0].createTextRange();return s.moveToBookmark(n.getBookmark()),l.collapse(!1),-1===s.compareEndPoints("StartToEnd",l)?(i=-s.moveStart("character",-r),i+=a.slice(0,i).split("\n").length-1,-1===s.compareEndPoints("EndToEnd",l)?(o=-s.moveEnd("character",-r),o+=a.slice(0,o).split("\n").length-1):o=r):o=i=r,e={position:i,start:i,end:o,length:r,text:n.text},void 0===t?e:e[t]},set:function(t,e){var n=this[0].createTextRange();void 0!==n&&(void 0===e&&(e=this[0].value.length),t=t-(this[0].value.slice(0,t).split("\r\n").length-1),e=e-(this[0].value.slice(0,e).split("\r\n").length-1),n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",t),n.select())},replace:function(t){document.selection.createRange().text=t}}};i.fn.extend({textrange:function(t){var e="get",n={};return void 0===this[0]?this:("string"==typeof t?e=t:"object"==typeof t&&(e=t.method||e,n=t),"unknown"===(r=void 0===r?"selectionStart"in this[0]?"xul":document.selection?"msie":"unknown":r)?this:(n.nofocus||document.activeElement===this[0]||this[0].focus(),"function"==typeof o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):void i.error("Method "+e+" does not exist in jQuery.textrange")))}})}),function(a){a.fn.extend({jqEasyCounter:function(n){return this.each(function(){var i,t,o=a(this),r=a.extend({maxChars:100,maxCharsWarning:80,msgFontSize:"12px",msgFontColor:"#000",msgFontFamily:"Arial",msgTextAlign:"right",msgWarningColor:"#F00",msgAppendMethod:"insertAfter",msg:"Characters: ",msgPlacement:"prepend",numFormat:"CURRENT/MAX"},n);function e(){var t,e=o.val(),n=e.length;n>=r.maxChars&&(e=e.substring(0,r.maxChars)),n>r.maxChars&&(t=o.scrollTop(),o.val(e.substring(0,r.maxChars)),o.scrollTop(t)),n>=r.maxCharsWarning?i.css({color:r.msgWarningColor}):i.css({color:r.msgFontColor}),html="prepend"===r.msgPlacement?r.msg+r.numFormat:r.numFormat+r.msg,html=html.replace("CURRENT",o.val().length),html=html.replace("MAX",r.maxChars),html=html.replace("REMAINING",r.maxChars-o.val().length),i.html(html),i.stop().fadeTo("fast",1)}r.maxChars<=0||(i=a('<div class="jqEasyCounterMsg">&nbsp;</div>'),t={"font-size":r.msgFontSize,"font-family":r.msgFontFamily,color:r.msgFontColor,"text-align":r.msgTextAlign,width:o.width(),opacity:0},i.css(t),i[r.msgAppendMethod](o),o.bind("keydown keyup keypress",e).bind("focus paste",function(){setTimeout(e,10)}).bind("blur",function(){return i.stop().fadeTo("fast",0),!1}))})}})}(jQuery);