!function(d,a,n){a.wp=a.wp||{},a.wp.gdbbx=a.wp.gdbbx||{},a.wp.gdbbx.helper={detect_msie:function(){var t=a.navigator.userAgent,e=t.indexOf("MSIE ");if(0<e)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(0<t.indexOf("Trident/")){e=t.indexOf("rv:");return parseInt(t.substring(e+3,t.indexOf(".",e)),10)}return 99},get_selection:function(){var t="";return a.getSelection?t=a.getSelection():n.getSelection?t=n.getSelection():n.selection&&(t=n.selection.createRange().text),d.trim(t.toString())},file_extension:function(t){return t.substr(t.lastIndexOf(".")+1).toLowerCase()},is_tinymce:function(){var t=0<d("#bbp_topic_content").length?"bbp_topic_content":"bbp_reply_content";return gdbbx_data.wp_editor&&!d("#"+t).is(":visible")},into_editor:function(t){var e,a=0<d("#bbp_topic_content").length?"bbp_topic_content":"bbp_reply_content";wp.gdbbx.helper.is_tinymce()?(t+="<br/><br/>",tinymce.get(a).execCommand("mceInsertContent",!1,t)):(a=(e=d("#"+a)).val(),""!==d.trim(a)&&(t="\n\n"+t),e.val(a+(t+="\n\n")))},scroll_to_editor:function(){8<wp.gdbbx.helper.detect_msie()?d("html, body").animate({scrollTop:d("#new-post").offset().top},1e3):n.location.href="#new-post",d(".bbp-the-content-wrapper textarea").focus()}},a.wp.gdbbx.toolbox={bbcodes:{init:function(){d(".gdbbx-bbcode-spoiler").each(function(){var t=d(this).data("hover"),e=d(this).data("color");d(this).hover(function(){d(this).css("background",t)},function(){d(this).css("background",e)})})}},quotes:{init:function(){d(n).on("click",".gdbbx-link-quote",function(t){var e,a,n,i;t.preventDefault(),0<d("#bbp_reply_content").length&&(n=wp.gdbbx.helper.get_selection(),e=d(this).data("id"),a=wp.gdbbx.helper.is_tinymce()?"</br></br>":"\n",t=!0,""===n&&(t=!1,n=d("#gdbbx-quote-wrapper-"+e).html()),n=(n=(n=(n=n.replace(/&nbsp;/g," ")).replace(/<\s*p[^>]*>/g,"")).replace(/<\s*\/\s*(p|br)\s*>|<\s*br\s*>/g,a)).trim(),n=d("<div>").html(n).html(),n="bbcode"===gdbbx_data.quote.method?"postquote"==(i="postquote"!==gdbbx_data.quote.bbcode||t?"quote":"postquote")?"["+i+" quote="+e+"]":"["+i+" quote="+e+"]"+n+"[/"+i+"]":(i=gdbbx_data.quote.wrote.replace("%s",d(this).data("author")),'<blockquote class="gdbbx-bbcode-quote">'+('<div class="gdbbx-quote-title"><a href="'+d(this).data("url")+'">'+i+":</a></div>")+n+"</blockquote>"),wp.gdbbx.helper.into_editor(n),wp.gdbbx.helper.scroll_to_editor())})}},canned_replies:{init:function(){d(".gdbbx-canned-replies .gdbbx-canned-replies-show").click(function(t){t.preventDefault();t=d(this).closest(".gdbbx-canned-replies");d(this).hide(),d(".gdbbx-canned-replies-hide",t).show(),d(".gdbbx-canned-replies-list",t).slideDown()}),d(".gdbbx-canned-replies .gdbbx-canned-replies-hide").click(function(t){t.preventDefault();t=d(this).closest(".gdbbx-canned-replies");d(this).hide(),d(".gdbbx-canned-replies-show",t).show(),d(".gdbbx-canned-replies-list",t).slideUp()}),d(".gdbbx-canned-replies .gdbbx-canned-reply-insert").click(function(t){t.preventDefault();var t=d(this).closest(".gdbbx-canned-reply"),t=d(".gdbbx-canned-reply-content",t).html();wp.gdbbx.helper.into_editor(t),gdbbx_data.canned_replies.auto_close_on_insert&&(t=d(this).closest(".gdbbx-canned-replies"),d(".gdbbx-canned-replies-hide",t).click())})}},fitvids:{init:function(){d(".bbp-topic-content, .bbp-reply-content").fitVids()}},report:{sending_report:!1,init:function(){d(".gdbbx-link-report").click(function(t){t.preventDefault(),wp.gdbbx.toolbox.report.sending_report||("form"===gdbbx_data.report.mode?wp.gdbbx.toolbox.report.form(d(this)):wp.gdbbx.toolbox.report.button(d(this)))})},button:function(t){var e,a=t.data("id"),t=t.data("nonce");"confirm"===gdbbx_data.report.mode&&!1===confirm(gdbbx_data.report.confirm)||(e={post:a,nonce:t},wp.gdbbx.toolbox.report.sending_report=!0,d.ajax({dataType:"html",type:"post",data:e,url:gdbbx_data.url+"?action=gdbbx_report_post",success:function(t){wp.gdbbx.toolbox.report.sending_report=!1,d(".gdbbx-link-report-"+e.post).replaceWith("<span>"+gdbbx_data.report.after+"</span>")}}))},form:function(t){var e,a=t.data("id"),n=t.data("nonce"),t=t.closest("#bbpress-forums").find(".post-"+a+" .bbp-reply-content, .post-"+a+" .bbp-topic-content");1===t.length&&(0===t.find(".gdbbx-report-wrapper").length&&(d(".gdbbx-report-wrapper").remove(),(e=d(".gdbbx-report-template > div").clone().addClass("gdbbx-report-wrapper")).find("button").data("id",a).data("nonce",n),t.append(e),e.find("input").focus(),wp.gdbbx.toolbox.report.handle(t.find(".gdbbx-report-wrapper"))),gdbbx_data.report.scroll&&((e=0)<d("#wpadminbar").length&&(e=d("#wpadminbar").height()),d("html, body").animate({scrollTop:t.find(".gdbbx-report-wrapper").offset().top-e},500)))},handle:function(a){d("button.gdbbx-report-cancel",a).click(function(){d(".gdbbx-report-wrapper").remove()}),d("button.gdbbx-report-send",a).click(function(){var e,t=d("input",a).val();t.length<gdbbx_data.report.min?alert(gdbbx_data.report.alert):(e={report:t,post:d(this).data("id"),nonce:d(this).data("nonce")},d(".gdbbx-report-form",a).hide(),d(".gdbbx-report-sending",a).show(),wp.gdbbx.toolbox.report.sending_report=!0,d.ajax({dataType:"html",type:"post",data:e,url:gdbbx_data.url+"?action=gdbbx_report_post",success:function(t){wp.gdbbx.toolbox.report.sending_report=!1,d(".gdbbx-report-sending",a).hide(),d(".gdbbx-report-sent",a).show(),d(".gdbbx-link-report-"+e.post).replaceWith("<span>"+gdbbx_data.report.after+"</span>")}}))})}},thanks:{init:function(){d(".gdbbx-link-thanks, .gdbbx-link-unthanks").click(function(t){t.preventDefault(),wp.gdbbx.toolbox.thanks.handle(this)})},handle:function(t){var e={nonce:d(t).data("thanks-nonce"),say:d(t).data("thanks-action"),id:d(t).data("thanks-id")},a=d(t),n=a.hasClass("gdbbx-link-thanks");d.ajax({dataType:"html",type:"post",data:e,url:gdbbx_data.url+"?action=gdbbx_say_thanks",success:function(t){t=d(t).fadeIn(600);d(".gdbbx-thanks-post-"+e.id).fadeOut(400).replaceWith(t),n?gdbbx_data.thanks.removal?a.removeClass("gdbbx-link-thanks").addClass("gdbbx-link-unthanks").data("thanks-action","unthanks").html(gdbbx_data.thanks.unthanks):a.replaceWith("<span>"+gdbbx_data.thanks.saved+"</span>"):a.removeClass("gdbbx-link-unthanks").addClass("gdbbx-link-thanks").data("thanks-action","thanks").html(gdbbx_data.thanks.thanks)}})}},scheduler:{init:function(){var t,e=d("#gdbbx_schedule_datetime");1===e.length&&(t=e.val(),t={enableTime:!0,enableSeconds:!0,altInput:!0,minDate:Date.now(),minTime:Date.now(),defaultDate:0===t.length?Date.now():t,dateFormat:"Y-m-d H:i:S"},""!==gdbbx_data.flatpickr_locale&&(t.locale=gdbbx_data.flatpickr_locale),e.flatpickr(t),d(n).on("change","#gdbbx_schedule_when",function(){var t=d(this).val(),e=d(this).parent().parent().next();"future"===t?e.show():e.hide()}))}},misc:{privacy:function(){d(".gdbbx-private-reply-hidden").each(function(){d(this).hide().prev(".bbp-reply-header").hide()})}},run:function(){"undefined"!=typeof gdbbx_data&&(wp.gdbbx.toolbox.misc.privacy(),-1<gdbbx_data.load.indexOf("scheduler")&&wp.gdbbx.toolbox.scheduler.init(),-1<gdbbx_data.load.indexOf("quote")&&wp.gdbbx.toolbox.quotes.init(),-1<gdbbx_data.load.indexOf("bbcodes")&&wp.gdbbx.toolbox.bbcodes.init(),-1<gdbbx_data.load.indexOf("report")&&wp.gdbbx.toolbox.report.init(),-1<gdbbx_data.load.indexOf("thanks")&&wp.gdbbx.toolbox.thanks.init(),-1<gdbbx_data.load.indexOf("canned_replies")&&wp.gdbbx.toolbox.canned_replies.init(),-1<gdbbx_data.load.indexOf("fitvids")&&d.fn.fitVids&&wp.gdbbx.toolbox.fitvids.init())}},d(n).ready(function(){wp.gdbbx.toolbox.run(),"object"==typeof EnlighterJS&&EnlighterJS.init("pre.gdbbx-bbcode-scode")})}(jQuery,window,document),function(l,h,t){h.wp=h.wp||{},h.wp.gdbbx=h.wp.gdbbx||{},h.wp.gdbbx.attachments={is_enhanced:!0,allow_submit:!0,extensions:[],files:[],inner:1,init:function(){l("form#new-post").attr("enctype","multipart/form-data"),this.is_enhanced="enhanced"===gdbbx_data.attachments.method&&9<wp.gdbbx.helper.detect_msie(),"string"==typeof gdbbx_data.attachments.allowed_extensions&&(this.extensions=gdbbx_data.attachments.allowed_extensions.split(" ")),this.actions(),(this.is_enhanced?this.enhanced:this.basic).run(),this.thread.run()},actions:function(){l(t).on("click",".gdbbx-attachment-insert",function(t){t.preventDefault();t=l(this).attr("href").substr(1);wp.gdbbx.helper.into_editor('[attachment file="'+t+'"]'),wp.gdbbx.helper.scroll_to_editor()}),l(t).on("click",".gdbbx-attachment-confirm",function(t){confirm(gdbbx_data.text.are_you_sure)||t.preventDefault()}),l(t).on("click",".gdbbx-attachment-add-file",function(t){t.preventDefault(),wp.gdbbx.attachments.add(this)})},count:function(){return l(".gdbbx-attachments-input").length},count_empty:function(){return l(".gdbbx-attachments-input:not(.gdbbx-attachment-added)").length},add:function(t){(!gdbbx_data.attachments.limiter||wp.gdbbx.attachments.count()<gdbbx_data.attachments.max_files)&&(!gdbbx_data.attachments.auto_new_file||gdbbx_data.attachments.auto_new_file&&0===wp.gdbbx.attachments.count_empty())&&(wp.gdbbx.attachments.is_enhanced?l(t).before(wp.gdbbx.attachments.enhanced.block()):l(t).before(wp.gdbbx.attachments.basic.block())),!gdbbx_data.attachments.auto_new_file&&gdbbx_data.attachments.limiter&&wp.gdbbx.attachments.count()===gdbbx_data.attachments.max_files&&l(t).hide()},enhanced:{run:function(){l(".gdbbx-attachments-form > div").addClass("gdbbx-validation-active"),gdbbx_data.attachments.auto_new_file&&l(".gdbbx-attachments-form").addClass("gdbbx-auto-newfile"),wp.gdbbx.attachments.enhanced.actions()},actions:function(){l(t).on("click",".gdbbx-attachment-preview",function(){l(this).closest(".gdbbx-attachments-input").find("input[type=file]").click()}),l(t).on("click",".gdbbx-attachments-input a.bbp-att-remove",function(t){t.preventDefault();var e=l(this).closest(".gdbbx-attachments-input"),t=e.data("id");delete wp.gdbbx.attachments.files[t],e.fadeOut("slow",function(){var t;gdbbx_data.attachments.auto_new_file?(t=e.parent(),0===l(".gdbbx-attachments-input:not(.gdbbx-attachment-added)",t).length&&l(".gdbbx-attachment-add-file",t).before(wp.gdbbx.attachments.enhanced.block())):l(".gdbbx-attachment-add-file").show(),0===wp.gdbbx.attachments.count()&&l(this).after(wp.gdbbx.attachments.enhanced.block()),l(this).remove(),wp.gdbbx.attachments.enhanced.check_submit()})}),l(t).on("change",".gdbbx-attachments-input input[type=file]",wp.gdbbx.attachments.enhanced.attach),l(t).on("click",".gdbbx-attachments-input a.bbp-att-caption",function(t){t.preventDefault(),l(this).prev().find("input").show(),l(this).hide()}),l(t).on("click",".gdbbx-attachments-input a.bbp-att-shortcode",function(t){t.preventDefault();t='[attachment file="'+l(this).data("file")+'"]';wp.gdbbx.helper.into_editor(t),wp.gdbbx.helper.scroll_to_editor()})},attach:function(){var t,e,a,n,i,d,b,o,s,r,c;this.files&&1===this.files.length&&(t=l(this).closest(".gdbbx-attachments-input"),d=i=n=a=!(e=""),c="",b=this.files[0],o=Math.round(b.size/1024),s=wp.gdbbx.helper.file_extension(b.name),r=b.name+b.size+b.lastModified+b.type,t.removeClass("gdbbx-attachment-invalid").addClass("gdbbx-attachment-added").data("id",wp.gdbbx.attachments.inner),c="<div>"+gdbbx_data.attachments.text.file_name+": <strong>"+b.name+"</strong></div>",c+="<div>"+gdbbx_data.attachments.text.file_size+": <strong>"+o+" kb</strong>, ",c+=gdbbx_data.attachments.text.file_type+": <strong>"+s.toUpperCase()+"</strong></div>",-1<l.inArray(s,["js","php"])&&(d=a=!1),l.each(wp.gdbbx.attachments.files,function(t,e){if(e===r)return n=a=!1}),n&&(wp.gdbbx.attachments.files[wp.gdbbx.attachments.inner]=r),gdbbx_data.attachments.limiter&&(b.size>gdbbx_data.attachments.max_size&&(i=a=!1),0<wp.gdbbx.attachments.extensions.length&&-1===l.inArray(s,wp.gdbbx.attachments.extensions)&&(d=a=!1)),a||(c+="<strong>",c+=gdbbx_data.attachments.text.file_validation,n||(c+=" "+gdbbx_data.attachments.text.file_validation_duplicate),d||(c+=" "+gdbbx_data.attachments.text.file_validation_type),i||(c+=" "+gdbbx_data.attachments.text.file_validation_size),c+="</strong><br/>",t.addClass("gdbbx-attachment-invalid")),a&&(gdbbx_data.attachments.set_caption_file&&(c+="<div><label><input name='gdbbx-attachment_caption[]' type='text' style='display: none' placeholder='"+gdbbx_data.attachments.text.file_caption_placeholder+"' /><span class='gdbbx-accessibility-show-for-sr'>"+gdbbx_data.attachments.text.file_caption_placeholder+"</span></label><a data-file='"+b.name+"' class='bbp-att-caption' href='#'>"+gdbbx_data.attachments.text.file_caption+"</a></div>"),gdbbx_data.attachments.insert_into_content&&(c+="<div><a class='bbp-att-shortcode' href='#'>"+gdbbx_data.attachments.text.file_shortcode+"</a></div>")),c+="<div><a class='bbp-att-remove' href='#'>"+gdbbx_data.attachments.text.file_remove+"</a></div>",t.find(".gdbbx-attachment-control").html(c),t.find(".gdbbx-attachment-control .bbp-att-shortcode").data("file",b.name),t.find(".gdbbx-attachment-preview .gdbbx-attached-file").remove(),h.FileReader&&/^([a-zA-Z0-9\s_\\.\-:\+])+(.jpg|.jpeg|.gif|.png|.bmp)$/.test(b.name.toLowerCase())?((c=new FileReader).readAsDataURL(b),c.onloadend=function(){e='<img class="gdbbx-attached-file" alt="'+b.name+'" src="'+this.result+'" />',t.find(".gdbbx-attachment-preview").prepend(e)}):(e='<p class="gdbbx-attached-file" title="'+b.name+'">.'+s.toUpperCase()+"</p>",t.find(".gdbbx-attachment-preview").prepend(e)),wp.gdbbx.attachments.inner++,wp.gdbbx.attachments.add(".gdbbx-attachments-form .gdbbx-attachment-add-file"),wp.gdbbx.attachments.enhanced.check_submit())},check_submit:function(){var t=!0;l(".gdbbx-attachments-form .gdbbx-attachments-input").each(function(){l(this).hasClass("gdbbx-attachment-invalid")&&(t=!1)}),l(".gdbbx-attachments-form").closest("form").find(".bbp-submit-wrapper button").attr("disabled",!t)},block:function(){var t='<div class="gdbbx-attachments-input gdbbx-validation-active">';return t+='<div role="button" class="gdbbx-attachment-preview"><span aria-hidden="true">'+gdbbx_data.attachments.text.select_file+"</span></div>",t+='<label><input type="file" size="40" name="gdbbx-attachment[]" />',t+='<span class="gdbbx-accessibility-show-for-sr">'+gdbbx_data.attachments.text.select_file+"</span></label>",t+='<div class="gdbbx-attachment-control"></div>',t+="</div>"}},basic:{run:function(){},actions:function(){},block:function(){var t='<div class="gdbbx-attachments-input gdbbx-validation-disabled">';return t+='<div class="gdbbx-attachment-header"><span aria-hidden="true">'+gdbbx_data.attachments.text.select_file+"</span></div>",t+='<label><input type="file" size="40" name="gdbbx-attachment[]" />',t+='<span class="gdbbx-accessibility-show-for-sr">'+gdbbx_data.attachments.text.select_file+"</span></label>",t+="</div>"}},thread:{nonce:"",topic:0,current:1,run:function(){l(t).on("click",".gdbbx-attachments-thread-pager .__prev",function(t){t.preventDefault();t=l(this).closest(".bbp-form");1<wp.gdbbx.attachments.thread.current&&(wp.gdbbx.attachments.thread.current--,wp.gdbbx.attachments.thread.show(t))}),l(t).on("click",".gdbbx-attachments-thread-pager .__next",function(t){t.preventDefault();var e=l(this).closest(".bbp-form"),t=l(".gdbbx-attachments-thread-pages",e).data("pages");wp.gdbbx.attachments.thread.current<t&&(wp.gdbbx.attachments.thread.current++,wp.gdbbx.attachments.thread.show(e))}),l(t).on("click",".gdbbx-attachments-thread-control a",function(t){t.preventDefault();t=l(this).parent().parent().find(".bbp-form");wp.gdbbx.attachments.thread.nonce=l(this).data("nonce"),wp.gdbbx.attachments.thread.topic=l(this).data("topic"),l(this).parent().remove(),t.show(),wp.gdbbx.attachments.thread.fetch(t,1)})},show:function(t){var e=l(".gdbbx-attachments-thread-pages",t),a=l(".gdbbx-attachments-thread-pager",t),n=e.data("pages"),i=wp.gdbbx.attachments.thread.current,e=l(".gdbbx-attachments-thread-page-"+wp.gdbbx.attachments.thread.current,t);a.removeClass("gdbbx-thread-current-first").removeClass("gdbbx-thread-current-last"),1===i?a.addClass("gdbbx-thread-current-first"):i===n&&a.addClass("gdbbx-thread-current-last"),l(".__current",a).html(i),e.hasClass("gdbbx-attachments-thread-empty")?wp.gdbbx.attachments.thread.fetch(t,i):(l(".gdbbx-attachments-thread-page",t).hide(),l(".gdbbx-attachments-thread-page-"+i,t).show())},fetch:function(e,a){l.ajax({dataType:"html",type:"post",data:{nonce:wp.gdbbx.attachments.thread.nonce,topic:wp.gdbbx.attachments.thread.topic,page:a},url:gdbbx_data.url+"?action=gdbbx_attachments_thread",success:function(t){l(".gdbbx-attachments-thread-page",e).hide(),l(".gdbbx-attachments-thread-page-"+a,e).html(t).removeClass("gdbbx-attachments-thread-empty").show(),l(".gdbbx-attachments-thread-pager",e).show()}})}}},l(t).ready(function(){wp.gdbbx.attachments.init()})}(jQuery,window,document),function(o,t,e){t.wp=t.wp||{},t.wp.gdbbx=t.wp.gdbbx||{},t.wp.gdbbx.toolbar={init:function(){o(".gdbbx-editor-bbcodes").each(function(){wp.gdbbx.toolbar.run(o(this),o(this))}),o(".gdbbx-newpost-bbcodes").each(function(){wp.gdbbx.toolbar.run(o(this),o(".bbp-the-content-wrapper"))}),o(".gdbbx-signature.gdbbx-limiter-enabled").each(function(){wp.gdbbx.toolbar.limit(o(this))})},run:function(t,e){o(".gdbbx-buttonbar-button button",t).keypress(function(t){32!==t.keyCode&&13!==t.keyCode||(t.preventDefault(),wp.gdbbx.toolbar.click(this,e))}),o(".gdbbx-buttonbar-button button",t).click(function(t){t.preventDefault(),wp.gdbbx.toolbar.click(this,e)})},click:function(t,e){var a=o(t).data("bbcode"),n=-1<(a=a.replace(/\(/g,"[").replace(/\)/g,"]").replace(/\'/g,'"')).indexOf("{content}"),i=-1<a.indexOf("{id}"),d=-1<a.indexOf("{url}"),b=-1<a.indexOf("{email}"),t=o("textarea",e),e=t.textrange();0<e.length&&(n?a=a.replace("{content}",e.text):i?a=a.replace("{id}",e.text):d?a=a.replace("{url}",e.text):b&&(a=a.replace("{email}",e.text))),t.textrange("replace",a)},limit:function(t){var e={maxChars:o(t).data("chars"),maxCharsWarning:o(t).data("warning"),msgFontSize:"inherit",msgFontFamily:"inherit",msgFontColor:"inherit"};o(t).jqEasyCounter(e)}},o(e).ready(function(){wp.gdbbx.toolbar.init()})}(jQuery,window,document),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}(function(n){var d,i={get:function(t){return b[d].get.apply(this,[t])},set:function(t,e){var a,n=parseInt(t),i=parseInt(e);return void 0===t?n=0:t<0&&(n=this[0].value.length+n),void 0!==e&&(a=0<=e?n+i:this[0].value.length+i),b[d].set.apply(this,[n,a]),this},setcursor:function(t){return this.textrange("set",t,0)},replace:function(t){return b[d].replace.apply(this,[String(t)]),this},insert:function(t){return this.textrange("replace",t)}},b={xul:{get:function(t){var e={position:this[0].selectionStart,start:this[0].selectionStart,end:this[0].selectionEnd,length:this[0].selectionEnd-this[0].selectionStart,text:this.val().substring(this[0].selectionStart,this[0].selectionEnd)};return void 0===t?e:e[t]},set:function(t,e){void 0===e&&(e=this[0].value.length),this[0].selectionStart=t,this[0].selectionEnd=e},replace:function(t){var e=this[0].selectionStart,a=this[0].selectionEnd,n=this.val();this.val(n.substring(0,e)+t+n.substring(a,n.length)),this[0].selectionStart=e,this[0].selectionEnd=e+t.length}},msie:{get:function(t){var e,a=document.selection.createRange();if(void 0===a)return e={position:0,start:0,end:this.val().length,length:this.val().length,text:this.val()},void 0===t?e:e[t];var n=0,i=0,d=this[0].value.length,b=this[0].value.replace(/\r\n/g,"\n"),o=this[0].createTextRange(),s=this[0].createTextRange();return o.moveToBookmark(a.getBookmark()),s.collapse(!1),-1===o.compareEndPoints("StartToEnd",s)?(n=-o.moveStart("character",-d),n+=b.slice(0,n).split("\n").length-1,-1===o.compareEndPoints("EndToEnd",s)?(i=-o.moveEnd("character",-d),i+=b.slice(0,i).split("\n").length-1):i=d):i=n=d,e={position:n,start:n,end:i,length:d,text:a.text},void 0===t?e:e[t]},set:function(t,e){var a=this[0].createTextRange();void 0!==a&&(void 0===e&&(e=this[0].value.length),t=t-(this[0].value.slice(0,t).split("\r\n").length-1),e=e-(this[0].value.slice(0,e).split("\r\n").length-1),a.collapse(!0),a.moveEnd("character",e),a.moveStart("character",t),a.select())},replace:function(t){document.selection.createRange().text=t}}};n.fn.extend({textrange:function(t){var e="get",a={};return void 0===this[0]?this:("string"==typeof t?e=t:"object"==typeof t&&(e=t.method||e,a=t),"unknown"===(d=void 0===d?"selectionStart"in this[0]?"xul":document.selection?"msie":"unknown":d)?this:(a.nofocus||document.activeElement===this[0]||this[0].focus(),"function"==typeof i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):void n.error("Method "+e+" does not exist in jQuery.textrange")))}})}),function(b){b.fn.extend({jqEasyCounter:function(a){return this.each(function(){var n,t,i=b(this),d=b.extend({maxChars:100,maxCharsWarning:80,msgFontSize:"12px",msgFontColor:"#000",msgFontFamily:"Arial",msgTextAlign:"right",msgWarningColor:"#F00",msgAppendMethod:"insertAfter",msg:"Characters: ",msgPlacement:"prepend",numFormat:"CURRENT/MAX"},a);function e(){var t,e=i.val(),a=e.length;a>=d.maxChars&&(e=e.substring(0,d.maxChars)),a>d.maxChars&&(t=i.scrollTop(),i.val(e.substring(0,d.maxChars)),i.scrollTop(t)),a>=d.maxCharsWarning?n.css({color:d.msgWarningColor}):n.css({color:d.msgFontColor}),html="prepend"===d.msgPlacement?d.msg+d.numFormat:d.numFormat+d.msg,html=html.replace("CURRENT",i.val().length),html=html.replace("MAX",d.maxChars),html=html.replace("REMAINING",d.maxChars-i.val().length),n.html(html),n.stop().fadeTo("fast",1)}d.maxChars<=0||(n=b('<div class="jqEasyCounterMsg">&nbsp;</div>'),t={"font-size":d.msgFontSize,"font-family":d.msgFontFamily,color:d.msgFontColor,"text-align":d.msgTextAlign,width:i.width(),opacity:0},n.css(t),n[d.msgAppendMethod](i),i.bind("keydown keyup keypress",e).bind("focus paste",function(){setTimeout(e,10)}).bind("blur",function(){return n.stop().fadeTo("fast",0),!1}))})}})}(jQuery);